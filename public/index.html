<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./../css/main.css">
    <title>PÃ¡gina Inicial</title>
</head>

<body>
    <header>
        <h1>Gerenciador de agenda</h1>
    </header>
    <main>
        <table style="width: 100%;">
            <thead>
                <tr>
                    <th>Nome Completo</th>
                    <th>Apelido</th>
                    <th>E-mail</th>
                    <th>whatsapp</th>
                    <th>AÃ§Ãµes</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </main>
    
    <footer><span><i>Criado por -> Felipe Jhordan Maciel Alves ðŸ¤ </i></span></footer>
    <script src="../js/jquery.min.js"></script>

    <script>
        $(function () {
                $.post("/contacts", {})
                    .done(function (json) {
                        console.log(json)
                        const contacts = JSON.parse(json)
                        setTable(pessoas)
                    })
                    .fail(function (jqXHR, textStatus, msg) {
                        alert(msg);
                    });
            })

            let sendSearch = (searchValue) => {
                $.post("/contacts", { search: searchValue })
                    .done(setCards)
                    .fail(function (jqXHR, textStatus, msg) {
                        alert(msg);
                    });

            }

            let setCards = (contacts = []) => {
                let html = ""
                contacts.forEach((contact) => {
                    html += `
             <tr>
                <td>${contact.name} </td>
                <td>${contact.name} </td>
                <td>${contact.name} </td>
                <td>${contact.name} </td>
                <td style='display: flex; flex-direction:column'>
                <a href='contatos/${contact.id}/editar'>Editar</a>    
                <a href=''>Remover </a>    
                </td>
                </tr>
        `
                })
                $("#section .row").html(html)
            }

    </script>
</body>

</html>